# Happy Hour FastAPI Project

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π CRUD (—Å–æ–∑–¥–∞–Ω–∏–µ, —á—Ç–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ) –Ω–∞–¥ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è–º–∏ –∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏.



### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- ‚ö° [**FastAPI**](https://fastapi.tiangolo.com) –¥–ª—è –±–µ–∫–µ–Ω–¥–∞ –Ω–∞ Python.
    - üß∞ [SQLAlchemy](https://sqlmodel.tiangolo.com) –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SQL-–±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (ORM).
    - üîç [Pydantic](https://docs.pydantic.dev), –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π FastAPI, –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.
    - üíæ [PostgreSQL](https://www.postgresql.org) –≤ –∫–∞—á–µ—Å—Ç–≤–µ SQL-–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
- üêã [Docker Compose](https://www.docker.com) –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.
- ‚úÖ –¢–µ—Å—Ç—ã —Å [Pytest](https://pytest.org).



#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Python —Å –ø–æ–º–æ—â—å—é pip —É –≤–∞—Å —É–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python. pip –æ–±—ã—á–Ω–æ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Python, –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ Python 3.4 –∏ –≤—ã—à–µ.



```shell
pip install python==3.9.13
```

- –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã –¥–ª—è Windows:

```shell
python -m venv myvenv
```

- –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã –¥–ª—è macOS –∏ Linux:

```shell
source venv/bin/activate
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```shell
pip install -r requirements.txt
```


#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
  - app/
    - `main.py`                      –∑–∞–ø—É—Å–∫–∞ FastAPI
    - companies/
      - `models.py`                   —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π —Ç–∞–±–ª–∏—Ü
      - `router.py`                   —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
      - `dao.py`                      —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö CRUD (–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç BaseDao)
      - `schemas.py`                  –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö (—Å—Ö–µ–º—ã) –∫–æ–º–ø–∞–Ω–∏–π
    - dao/                             
      - `base.py`                     —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å BaseDao                 
    - products/
      - `models.py`                   —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π —Ç–∞–±–ª–∏—Ü
      - `router.py`                   –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
      - `dao.py`                      –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç BaseDao)
      - `schemas.py`                  –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö (—Å—Ö–µ–º—ã) –ø—Ä–æ–¥—É–∫—Ç–æ–≤
    - tests/                          –ü–∞–ø–∫–∞ –¥–ª—è –æ–±—â–∏—Ö —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
    - `config.py`                     –°–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ—Ä–∫—É–∂–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ .env
    - `database.py`                   –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
    - `exceptions.py`                 –í–∫–ª—é—á–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è
    - `migrations`                    –°–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Alembic




#### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```shell
pytest
```


## –ü–æ–ª–µ–∑–Ω–æ –∑–Ω–∞—Ç—å
```Python
# app/config.py
from typing import Literal

from pydantic_settings import BaseSettings


class Settings(BaseSettings):
    MODE: Literal["DEV", "TEST", "PROD",] = "PROD"
    DB_HOST: str
    DB_PORT: int
    DB_USER: str
    DB_PASS: str
    DB_NAME: str

    @property
    def get_database_url(self) -> str:
        return f"postgresql+asyncpg://{self.DB_USER}:{self.DB_PASS}@{self.DB_HOST}:{self.DB_PORT}/{self.DB_NAME}"

    TEST_DB_HOST: str
    TEST_DB_PORT: int
    TEST_DB_USER: str
    TEST_DB_PASS: str
    TEST_DB_NAME: str

    @property
    def get_test_database_url(self) -> str:
        return f"postgresql+asyncpg://{self.TEST_DB_USER}:{self.TEST_DB_PASS}@{self.TEST_DB_HOST}:{self.TEST_DB_PORT}/{self.TEST_DB_NAME}"

    class Config:
        env_file = ".env"


settings = Settings()

```
–î–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ Settings, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π MODE –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –≤–∫–ª—é—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ MODE —Ä–∞–≤–µ–Ω TEST, —Ç–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–≤–∞—Ç—å—Å—è —Ç–µ—Å—Ç–æ–≤–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤ –±–µ–∑ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ä–∞–±–æ—á–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.


### –ù–∞—Å—Ç—Ä–æ–∏—Ç—å
–ü—Ä–µ–∂–¥–µ —á–µ–º —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —Å–æ–∑–¥–∞–ª–∏ —Ñ–∞–π–ª `.env` –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∏–∂–µ. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ.


```plaintext
MODE=DEV

DB_HOST=localhost
DB_PORT=5432
DB_USER=myuser
DB_PASS=mypassword
DB_NAME=db

TEST_DB_HOST=localhost
TEST_DB_PORT=5432
TEST_DB_USER=myuser
TEST_DB_PASS=mypassword
TEST_DB_NAME=db_test
```


#### Database Schema


–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –¥–≤–µ —Ç–∞–±–ª–∏—Ü—ã: "Company" –∏ "Product". –≠—Ç–∏ —Ç–∞–±–ª–∏—Ü—ã —Å–≤—è–∑–∞–Ω—ã –æ—Ç–Ω–æ—à–µ–Ω–∏–µ–º "–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º", —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —É –æ–¥–Ω–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤.
![Alt —Ç–µ–∫—Å—Ç](./images/schema_db.png 'Schema of database')








## –ö–æ–Ω—Ç–∞–∫—Ç—ã
–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å–æ –º–Ω–æ–π:

- **Email:** kurmusheuv.nurzhigit@gmail.com
- **–¢–µ–ª–µ—Ñ–æ–Ω:** +996500755887
- **Telegram:**  @Nurzhigit312